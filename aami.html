<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>Hindi Sentence Builder</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; text-align: center; }
    #scoreboard { font-size: 20px; margin-bottom: 15px; font-weight: bold; }
    #question { font-size: 22px; margin: 20px 0; }
    #puzzle { margin: 20px 0; }
    .card {
      display: inline-block;
      padding: 10px 15px;
      margin: 5px;
      background: #f0f0f0;
      border-radius: 8px;
      cursor: pointer;
      font-size: 20px;
      transition: transform 0.2s;
    }
    .card:hover { background: #ddd; }
    .card.shake {
      animation: shake 0.3s;
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
      75% { transform: translateX(-5px); }
      100% { transform: translateX(0); }
    }
    #answer { margin-top: 20px; font-size: 20px; min-height: 40px; }
    #status { margin-top: 15px; font-size: 18px; }
  </style>
</head>
<body>
  <div id="scoreboard">Score: 0 | Progress: 0/0</div>
  <input type="file" id="fileInput" accept=".txt">
  <div id="question"></div>
  <div id="puzzle"></div>
  <div id="answer"></div>
  <div id="status"></div>

  <script>
    let sentences = [];
    let current = 0;
    let expectedWords = [];
    let score = 0;

    function updateScoreboard() {
      document.getElementById("scoreboard").textContent =
        `Score: ${score} | Progress: ${current}/${sentences.length}`;
    }

    async function loadDefaultFile() {
      try {
        let resp = await fetch("sentences.txt");
        if (!resp.ok) throw new Error("File missing");
        let text = await resp.text();
        sentences = text.trim().split("\n").filter(l => l.length > 0);
        startGame();
      } catch {
        document.getElementById("status").textContent =
          "Upload a sentences.txt file to start.";
      }
    }

    document.getElementById("fileInput").addEventListener("change", function (e) {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (event) {
        sentences = event.target.result.trim().split("\n").filter(l => l.length > 0);
        current = 0;
        score = 0;
        startGame();
      };
      reader.readAsText(file);
    });

    function startGame() {
      updateScoreboard();
      showSentence();
    }

    function showSentence() {
      if (current >= sentences.length) {
        document.getElementById("question").textContent = "Game Over!";
        document.getElementById("puzzle").innerHTML = "";
        document.getElementById("answer").textContent = "";
        document.getElementById("status").textContent = `Final Score: ${score}`;
        return;
      }

      let [q, ans] = sentences[current].split("?");
      document.getElementById("question").textContent = q + "?";

      expectedWords = ans.trim().split(" ").filter(w => w.length > 0);

      let shuffled = [...expectedWords].sort(() => Math.random() - 0.5);
      let puzzleDiv = document.getElementById("puzzle");
      puzzleDiv.innerHTML = "";
      document.getElementById("answer").textContent = "";

      shuffled.forEach(word => {
        let card = document.createElement("div");
        card.textContent = word;
        card.className = "card";
        card.addEventListener("click", () => handleCardClick(card, word));
        puzzleDiv.appendChild(card);
      });

      document.getElementById("status").textContent = "";
      updateScoreboard();
    }

    function handleCardClick(card, word) {
      let answerDiv = document.getElementById("answer");
      if (word === expectedWords[0]) {
        answerDiv.textContent += word + " ";
        expectedWords.shift();
        card.remove();
        if (expectedWords.length === 0) {
          score += 50;
          current++;
          updateScoreboard();
          setTimeout(showSentence, 800);
        }
      } else {
        card.classList.add("shake");
        score -= 10;
        updateScoreboard();
        setTimeout(() => card.classList.remove("shake"), 300);
      }
    }

    loadDefaultFile();
  </script>
</body>
</html>
